<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard - E-commerce</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
  h1, h2 { text-align: center; }
  .stats { display: flex; justify-content: space-around; margin: 20px 0; }
  .stat-box { background: #fff; padding: 20px; border-radius: 8px; box-shadow: 2px 2px 10px rgba(0,0,0,0.1); text-align: center; width: 200px; }
  .product-list { margin-top: 30px; display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; }
  .product-card { background: #fff; padding: 15px; border-radius: 8px; box-shadow: 2px 2px 10px rgba(0,0,0,0.1); width: 250px; text-align: center; }
  .product-card img { width: 100%; height: 180px; object-fit: cover; border-radius: 10px; }
</style>
</head>
<body>

<h1>Admin Dashboard</h1>
<div class="stats">
  <div class="stat-box"><h2 id="totalProducts">0</h2><p>Total Products</p></div>
</div>

<h2>All Products</h2>
<div class="product-list" id="productList"></div>

<!-- Supabase JS -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.35.0/dist/supabase.min.js"></script>

<script>
  // Use your actual Supabase keys here
  const SUPABASE_URL = 'https://gpyuveeyrckpwokdgzba.supabase.co';
  const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdweXV2ZWV5cmNrcHdva2RnemJhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5MDEzNTIsImV4cCI6MjA3NTQ3NzM1Mn0.mhv2u5uhzqKhgWQqNPysR3Haa5DwL1LtLfeyOvLGPLo';
  const sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  const productList = document.getElementById("productList");
  const totalProducts = document.getElementById("totalProducts");

  async function loadProducts() {
    const { data: products, error } = await sb.from('products').select('*');


    if (error) {
      console.error("Error fetching products:", error);
      return;
    }

    totalProducts.innerText = products.length;
    productList.innerHTML = '';

    products.forEach(product => {
      const image = product.images && product.images.length > 0 ? product.images[0] : 'https://via.placeholder.com/250x180';
      productList.innerHTML += `
        <div class="product-card">
          <img src="${image}" alt="${product.name}">
          <h3>${product.name}</h3>
          <p>â‚¹${product.price}</p>
          <p>Category: ${product.category}</p>
        </div>
      `;
    });
  }

  // Initial load
  loadProducts();
</script>

</body>
</html>
